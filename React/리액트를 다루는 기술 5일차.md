## 8ì¥ Hooks

### 8.1 useState
ê°€ì¥ ê¸°ë³¸ì ì¸ Hookì´ë©°, ê°€ë³€ì ì¸ ìƒíƒœë¥¼ ì§€ë‹ ìˆ˜ ìˆê²Œ í•´ ì¤ë‹ˆë‹¤. useState í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ì—ëŠ” ìƒíƒœì˜ ê¸°ë³¸ê°’ì„ ë„£ì–´ ì£¼ëŠ”ë° ì´ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë©´ ë°°ì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ë°°ì—´ì˜ ì²« ë²ˆì§¸ ì›ì†ŒëŠ” ìƒíƒœ ê°’, ë‘ ë²ˆì§¸ ì›ì†ŒëŠ” ìƒíƒœë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ì´ í•¨ìˆ˜ì— íŒŒë¼ë¯¸í„°ë¥¼ ë„£ì–´ì„œ í˜¸ì¶œí•˜ë©´ ì „ë‹¬ë°›ì€ íŒŒë¼ë¯¸í„°ë¡œ ê°’ì´ ë°”ë€Œê³  ì»´í¬ë„ŒíŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ë¦¬ë Œë”ë§ë©ë‹ˆë‹¤.
```javascript
import React from 'react';
import { useState } from 'react';

const Info = () => {
    const [name, setName] = useState('');
    const [nickname, setNickname] = useState('');

    const onChangeName = e => {
        setName(e.target.value);
    }
    const onChangeNickname = e => {
        setNickname(e.target.value)
    }
    return (
        <div>
            <div>
                <input value={name} onChange={onChangeName}></input>
                <input value={nickname} onChange={onChangeNickname}></input>
            </div>
            <div>
                <div>
                    <b>ì´ë¦„:</b>{name}
                </div>
                <div>
                    <b>ë‹‰ë„¤ì„:</b>{nickname}
                </div>
            </div>
        </div>
    );
};

export default Info;
```

### 8.2 useEffect
ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œë§ˆë‹¤ íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆëŠ” Hookì…ë‹ˆë‹¤. ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„° ë°°ì—´ì— ë¬´ì—‡ì„ ë„£ëŠ”ì§€ì— ë”°ë¼ ì‹¤í–‰ë˜ëŠ” ì¡°ê±´ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.

```javascript
useEffect(()=>{
        console.log('ë Œë”ë§ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
        console.log({name , nickname});
    })
```

![](https://velog.velcdn.com/images/guddyd6761/post/e1b552b6-209f-40b8-a8e7-80ed0b1f51a5/image.png)

useEffectì—ì„œ ì„¤ì •í•œ í•¨ìˆ˜ë¥¼ ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ë§¨ ì²˜ìŒ ë Œë”ë§ë  ë•Œë§Œ ì‹¤í–‰í•˜ê³ , ì—…ë°ì´íŠ¸ë  ë•ŒëŠ” ì‹¤í–‰í•˜ì§€ ì•Šìœ¼ë ¤ë©´ í•¨ìˆ˜ì˜ ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ë¹„ì–´ ìˆëŠ” ë°°ì—´ì„ ë„£ì–´ ì£¼ë©´ ë©ë‹ˆë‹¤.
```javascript
useEffect(()=>{
        console.log('ë§ˆìš´íŠ¸ë  ë•Œë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.');
    },[]);
```

íŠ¹ì •ê°’ì´ ì—…ë°ì´íŠ¸ë  ë•Œë§Œ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•ŒëŠ” ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ëŠ” ë°°ì—´ ì•ˆì— ê²€ì‚¬í•˜ê³  ì‹¶ì€ ê°’ì„ ë„£ì–´ ì£¼ë©´ ë©ë‹ˆë‹¤.
```javascript
useEffect(()=>{
        console.log(name);
    },[name]);
```
ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë˜ê¸° ì „ì´ë‚˜ ì—…ë°ì´íŠ¸ë˜ê¸° ì§ì „ì— ì–´ë– í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ì‹¶ë‹¤ë©´ useEffectì—ì„œ ë’·ì •ë¦¬(cleanup)í•¨ìˆ˜ë¥¼ ë°˜í™˜í•´ ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.
```javascript
useEffect(() => {
    console.log(â€˜effectâ€˜);
    console.log(name);
    return () => {
      console.log(â€˜cleanupâ€˜);
      console.log(name);
    };
  });
```
**í´ë¦°ì—… ì‚¬ìš©ì‹œ ì‘ë™ìˆœì„œ**
> re-render -> ì´ì „ effect clean-up -> effect


### 8.3 useReducer
useStateë³´ë‹¤ ë” ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ ìƒí™©ì— ë”°ë¼ ë‹¤ì–‘í•œ ìƒíƒœë¥¼ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•´ ì£¼ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” Hookì…ë‹ˆë‹¤. 
ë¦¬ë“€ì„œëŠ” í˜„ì¬ ìƒíƒœ, ê·¸ë¦¬ê³  ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ í•„ìš”í•œ ì •ë³´ë¥¼ ë‹´ëŠ” ì•¡ì…˜ ê°’ì„ ì „ë‹¬ë°›ì•„ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¡œ, ë°˜ë“œì‹œ ë¶ˆë³€ì„±ì„ ì§€ì¼œì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.
```javascript
function reducer(state,action){
	return { ... }; // ë¶ˆë³€ì„±ì„ ì§€í‚¤ë©´ì„œ ì—…ë°ì´íŠ¸í•œ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
}
```

```javascript
import React, { useReducer } from "react";


function reducer(state, action) {
  // action.typeì— ë”°ë¼ ë‹¤ë¥¸ ì‘ì—… ìˆ˜í–‰
  switch (action.type) {
    case "INCREMENT":
      return { value: state.value + 1 };
    case "DECREMENT":
      return { value: state.value - 1 };
    default:
      // ì•„ë¬´ê²ƒë„ í•´ë‹¹ë˜ì§€ ì•Šì„ ë•Œ ê¸°ì¡´ ìƒíƒœ ë°˜í™˜
      return state;
  }
}



const Counter = () => {
  const [state, dispatch] = useReducer(reducer, { value: 0 });



return (
    <div>
      <p>
        í˜„ì¬ ì¹´ìš´í„° ê°’ì€ <b>{state.value}</b>ì…ë‹ˆë‹¤.
      </p>
      <button onClick={() => dispatch({ type: â€˜INCREMENTâ€˜ })}>+1</button>
      <button onClick={() => dispatch({ type: â€˜DECREMENTâ€˜ })}>-1</button>
    </div>
  );
};

export default Counter;
```
ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì—ëŠ” ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ ë„£ê³ , ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì—ëŠ” í•´ë‹¹ ë¦¬ë“€ì„œì˜ ê¸°ë³¸ê°’ì„ ë„£ì–´ ì¤ë‹ˆë‹¤. ì´ Hookì„ ì‚¬ìš©í•˜ë©´ stateê°’(í˜„ì¬ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ìƒíƒœ)ê³¼ dispatchí•¨ìˆ˜(ì•¡ì…˜ì„ ë°œìƒì‹œí‚¤ëŠ” í•¨ìˆ˜)ë¥¼ ë°›ì•„ ì˜¤ëŠ”ë°, í•¨ìˆ˜ ì•ˆì— íŒŒë¼ë¯¸í„°ë¡œ ì•¡ì…˜ ê°’ì„ ë„£ì–´ ì£¼ë©´ ë¦¬ë“€ì„œ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ ì—…ë°ì´íŠ¸ ë¡œì§ì„ ì»´í¬ë„ŒíŠ¸ ë°”ê¹¥ìœ¼ë¡œ ë¹¼ë‚¼ ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.

### 8.4 useMemo
í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ë°œìƒí•˜ëŠ” ì—°ì‚°ì„ ìµœì í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë Œë”ë§í•˜ëŠ” ê³¼ì •ì—ì„œ íŠ¹ì • ê°’ì´ ë°”ë€Œì—ˆì„ ë•Œë§Œ ì—°ì‚°ì„ ì‹¤í–‰í•˜ê³ , ì›í•˜ëŠ” ê°’ì´ ë°”ë€Œì§€ ì•Šì•˜ë‹¤ë©´ ì´ì „ì— ì—°ì‚°í–ˆë˜ ê²°ê³¼ë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.
```javascript
import React, { useState, useMemo } from "react";


const getAverage = numbers => {
  console.log("í‰ê· ê°’ ê³„ì‚° ì¤‘..");
  if (numbers.length === 0) return 0;
  const sum = numbers.reduce((a, b) => a + b);
  return sum / numbers.length;
};



const Average = () => {
  const [list, setList] = useState([]);
  const [number, setNumber] = useState("");



const onChange = e => {
    setNumber(e.target.value);
  };
  const onInsert = () => {
    const nextList = list.concat(parseInt(number));
    setList(nextList);
    setNumber("");
  };


// list ë°°ì—´ì˜ ë‚´ìš©ì´ ë°”ë€” ë•Œë§Œ getAverage í•¨ìˆ˜ê°€ í˜¸ì¶œ
const avg = useMemo(() => getAverage(list), [list]);



return (
    <div>
      <input value={number} onChange={onChange} />
      <button onClick={onInsert}>ë“±ë¡</button>
      <ul>
        {list.map((value, index) => (
          <li key={index}>{value}</li>
        ))}
      </ul>
      <div>
        <b>í‰ê· ê°’:</b> {avg}
      </div>
    </div>
  );
};

export default Average;
```

### 8.5 useCallback
useMemoì™€ ë¹„ìŠ·í•œ í•¨ìˆ˜ë¡œ, ì£¼ë¡œ ë Œë”ë§ ì„±ëŠ¥ì„ ìµœì í™”í•´ì•¼ í•˜ëŠ” ìƒí™©ì—ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤. 

```javascript
import React, { useState, useMemo, useCallback } from "react";


const getAverage = numbers => {
  console.log("í‰ê· ê°’ ê³„ì‚° ì¤‘..");
  if (numbers.length === 0) return 0;
  const sum = numbers.reduce((a, b) => a + b);
  return sum / numbers.length;
};



const Average = () => {
  const [list, setList] = useState([]);
  const [number, setNumber] = useState("");

  
  
 // useCallbackì˜ ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì—ëŠ” ìƒì„±í•˜ê³  ì‹¶ì€ í•¨ìˆ˜ë¥¼ ë„£ê³ , 
// ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì—ëŠ” ë°°ì—´ì„ ë„£ìŒ -> ì´ ë°°ì—´ì—ëŠ” ì–´ë–¤ ê°’ì´ ë°”ë€Œì—ˆì„ ë•Œ í•¨ìˆ˜ë¥¼ ìƒˆë¡œ ìƒì„±í•´ì•¼ í•˜ëŠ”ì§€ ëª…ì‹œ
  
// í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ìƒíƒœ ê°’ì— ì˜ì¡´í•´ì•¼ í•  ë•ŒëŠ” ê·¸ ê°’ì„ ë°˜ë“œì‹œ ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„° ì•ˆì— í¬í•¨
// ì˜ˆë¥¼ ë“¤ì–´ onChangeì˜ ê²½ìš° ê¸°ì¡´ì˜ ê°’ì„ ì¡°íšŒí•˜ì§€ ì•Šê³  ë°”ë¡œ ì„¤ì •ë§Œ í•˜ê¸° ë•Œë¬¸ì— ë°°ì—´ì´ ë¹„ì–´ ìˆì–´ë„ ìƒê´€ì—†ìŒ
  
// onInsertëŠ” ê¸°ì¡´ì˜ numberì™€ listë¥¼ ì¡°íšŒí•´ì„œ nextListë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— ë°°ì—´ ì•ˆì— numberì™€ listë¥¼ ê¼­ ë„£ì–´ì•¼ í•¨
  
  
 // onChangeì²˜ëŸ¼ ë¹„ì–´ ìˆëŠ” ë°°ì—´ì„ ë„£ê²Œ ë˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œ ë‹¨ í•œ ë²ˆë§Œ í•¨ìˆ˜ê°€ ìƒì„±
const onChange = useCallback(e => {
    setNumber(e.target.value);
}, []); // ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë Œë”ë§ë  ë•Œë§Œ í•¨ìˆ˜ ìƒì„±
  
  
// onInsertì²˜ëŸ¼ ë°°ì—´ ì•ˆì— numberì™€ listë¥¼ ë„£ê²Œ ë˜ë©´ ì¸í’‹ ë‚´ìš©ì´ ë°”ë€Œê±°ë‚˜ ìƒˆë¡œìš´ í•­ëª©ì´ ì¶”ê°€ë  ë•Œë§ˆë‹¤ í•¨ìˆ˜ê°€ ìƒì„±

const onInsert = useCallback(() => {
    const nextList = list.concat(parseInt(number));
    setList(nextList);
    setNumber("");
  }, [number, list]); // number í˜¹ì€ listê°€ ë°”ë€Œì—ˆì„ ë•Œë§Œ í•¨ìˆ˜ ìƒì„±



const avg = useMemo(() => getAverage(list), [list]);



return (
    <div>
      <input value={number} onChange={onChange}  />
      <button onClick={onInsert}>ë“±ë¡</button>
      <ul>
        {list.map((value, index) => (
          <li key={index}>{value}</li>
        ))}
      </ul>
      <div>
        <b>í‰ê· ê°’:</b> {avg}
      </div>
    </div>
  );
};



export default Average;
```
> **ğŸ”¥useMemoì™€ useCallbackì˜ ì°¨ì´ì **
memoizationì´ë€ ê¸°ì¡´ì— ìˆ˜í–‰í•œ ì—°ì‚°ì˜ ê²°ê³¼ê°’ì„ ì–´ë”˜ê°€ì— ì €ì¥í•´ë‘ê³  ë™ì¼í•œ ì…ë ¥ì´ ë“¤ì–´ì˜¤ë©´ ì¬í™œìš©í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ê¸°ë²•ì„ ë§í•œë‹¤. useMemoëŠ” ë©”ëª¨ì´ì œì´ì…˜ëœ 'ê°’'ì„ ë°˜í™˜í•˜ê³ , useCallbackì€ ë©”ëª¨ë¦¬ì œì´ì…˜ëœ 'í•¨ìˆ˜'ë¥¼ ë°˜í™˜í•œë‹¤.


### 8.6 useRef
useRefë¥¼ ì‚¬ìš©í•˜ì—¬ refë¥¼ ì„¤ì •í•˜ë©´ current ê°’ì´ ì‹¤ì œ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤.
```javascript
import React, { useState, useMemo , useRef} from "react";


const getAverage = numbers => {
  console.log("í‰ê· ê°’ ê³„ì‚° ì¤‘..");
  if (numbers.length === 0) return 0;
  const sum = numbers.reduce((a, b) => a + b);
  return sum / numbers.length;
};



const Average = () => {
  const [list, setList] = useState([]);
  const [number, setNumber] = useState("");
  const inputEl = useRef(null);



const onChange = e => {
    setNumber(e.target.value);
  };
  const onInsert = () => {
    const nextList = list.concat(parseInt(number));
    setList(nextList);
    setNumber("");
    inputEl.current.focus();
  };


// list ë°°ì—´ì˜ ë‚´ìš©ì´ ë°”ë€” ë•Œë§Œ getAverage í•¨ìˆ˜ê°€ í˜¸ì¶œ

const avg = useMemo(() => getAverage(list), [list]);



return (
    <div>
      <input value={number} onChange={onChange} ref={inputEl}/>
      <button onClick={onInsert}>ë“±ë¡</button>
      <ul>
        {list.map((value, index) => (
          <li key={index}>{value}</li>
        ))}
      </ul>
      <div>
        <b>í‰ê· ê°’:</b> {avg}
      </div>
    </div>
  );
};



export default Average;
```

ì»´í¬ë„ŒíŠ¸ ë¡œì»¬ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•  ë•Œë„ useRefë¥¼ í™œìš©í•  ìˆ˜ ìˆëŠ”ë°, `ë¡œì»¬ë³€ìˆ˜ë€ ë Œë”ë§ê³¼ ìƒê´€ì—†ì´ ë°”ë€” ìˆ˜ ìˆëŠ” ê°’ì„ ì˜ë¯¸`í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ref ì•ˆì˜ ê°’ì´ ë°”ë€Œì–´ë„ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì—ëŠ” ì£¼ì˜í•˜ê³ 
ë Œë”ë§ê³¼ ê´€ë ¨ë˜ì§€ ì•Šì€ ê°’ì„ ê´€ë¦¬í•  ë•Œë§Œ ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

```javascript
import React, { useRef } from 'react';
 
const RefSample = () => {
  
  const id = useRef(1);
  const setId = (n) => {
    id.current = n;
  }
  const printId = () => {
    console.log(id.current);
  }
  return (
    <div>
      refsample
    </div>
  );
};
 
export default RefSample;
```

### 8.7 ì»¤ìŠ¤í…€ Hooks ë§Œë“¤ê¸°
ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¹„ìŠ·í•œ ê¸°ëŠ¥ì„ ê³µìœ í•  ê²½ìš°, ì»¤ìŠ¤í…€ Hookìœ¼ë¡œ ì‘ì„±í•˜ì—¬ ì¬ì‚¬ìš© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```javascript
// useInputs.js

import { useReducer } from "react";
 
function reducer(state, action) {
  return {
    â€¦state,
    [action.name]: action.value
  };
}
 
export default function useInputs(initialForm) {
  const [state, dispatch] = useReducer(reducer, initialForm);
  const onChange = e => {
    dispatch(e.target);
  };
  return [state, onChange];
}
```