## 15ì¥ Context API
Context APIëŠ” ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ì—ì„œ ì „ì—­ì ìœ¼ë¡œ ì‚¬ìš©í•  ë°ì´í„°ê°€ ìˆì„ ë•Œ ìœ ìš©í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤. ë¦¬ë•ìŠ¤, ë¦¬ì•¡íŠ¸ ë¼ìš°í„°, styled-components ë“±ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” Context APIë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### 15.1 Context APIë¥¼ ì‚¬ìš©í•œ ì „ì—­ ìƒíƒœ ê´€ë¦¬ íë¦„ ì´í•´í•˜ê¸°
ë¦¬ì•¡íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì»´í¬ë„ŒíŠ¸ ê°„ì— ë°ì´í„°ë¥¼ propsë¡œ ì „ë‹¬í•˜ê¸° ë•Œë¬¸ì— ì»´í¬ë„ŒíŠ¸ ì—¬ê¸°ì €ê¸°ì„œ í•„ìš”í•œ ë°ì´í„°ê°€ ìˆì„ ë•ŒëŠ” ì£¼ë¡œ ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ì¸ Appì˜ stateì— ë„£ì–´ì„œ ê´€ë¦¬í•©ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/guddyd6761/post/1eff95b6-9556-41e5-a98a-83eddcc88c56/image.png)

ìœ„ì™€ ê°™ì€ ìƒí™©ì—ì„œ Appì´ ì§€ë‹ˆê³  ìˆëŠ” valueê°’ì„ Fì»´í¬ë„ŒíŠ¸ì™€ Jì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬í•˜ë ¤ë©´ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ê±°ì³ì•¼ í•©ë‹ˆë‹¤. ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë‹¤ë£¨ì–´ì•¼ í•˜ëŠ” ë°ì´í„°ê°€ í›¨ì”¬ ë§ì•„ì§ˆ ìˆ˜ë„ ìˆê¸°ì—, ì´ëŸ¬í•œ ë°©ì‹ì€ ìœ ì§€ ë³´ìˆ˜ì„±ì´ ë‚®ì•„ì§ˆ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. Context APIë¥¼ ì‚¬ìš©í•˜ë©´ Contextë¥¼ ë§Œë“¤ì–´ ë‹¨ í•œ ë²ˆì— ì›í•˜ëŠ” ê°’ì„ ë°›ì•„ì™€ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![](https://velog.velcdn.com/images/guddyd6761/post/2d6c16d5-fa2d-41e3-923d-913573472307/image.png)


### 15.2 Context API ì‚¬ìš©ë²• ìµíˆê¸°

#### ìƒˆ Context ë§Œë“¤ê¸°
```javascript
///color.js
import {createContext} from 'react';

const ColorContext = createContext({color : 'black'});

export default ColorContext
```
#### Consumer ì‚¬ìš©í•˜ê¸°
ìƒ‰ìƒì„ propsë¡œ ë°›ì•„ ì˜¤ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ColorContextì•ˆì— ë“¤ì–´ ìˆëŠ” Consumerë¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•´ ìƒ‰ìƒì„ ì¡°íšŒí•  ê²ƒì…ë‹ˆë‹¤.

```javascript
/// ColorBox.js
import ColorContext from '../contexts/color';

const ColorBox = () => {
  return (
    <>
    <ColorContext.Consumer>
    {value =>(
      <div
        style={{
          width: '64px',
          height: '64px',
          background: value.color
        }}
      />
      )} 
      </ColorContext.Consumer>
    </>
  );
};

export default ColorBox;
```
Consumer ì‚¬ì´ì— ì¤‘ê´„í˜¸ë¥¼ ì—´ì–´ì„œ ê·¸ ì•ˆì— í•¨ìˆ˜ë¥¼ ë„£ì–´ ì£¼ì—ˆëŠ”ë°, ì´ëŸ¬í•œ íŒ¨í„´ì„ Function as a child í˜¹ì€ Render Propsë¼ê³  í•©ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ì˜ childrenì´ ìˆì–´ì•¼ í•  ìë¦¬ì— ì¼ë°˜ JSXí˜¹ì€ ë¬¸ìì—´ì´ ì•„ë‹Œ í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

> ğŸ”¥Render Props ì˜ˆì œ
```javascript
	const RenderPropsSample = ({children}) => {
	return <div>ê²°ê³¼:{children(5)}</div>;
	};
	export default RenderPropsSample
```
ìœ„ì™€ ê°™ì€ ì»´í¬ë„ŒíŠ¸ê°€ ìˆë‹¤ë©´ ì¶”í›„ì— ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤.
```javascript
<RenderPropsSample>{value => 2*value }</RenderPropsSample>
//ê²°ê³¼ : 10ì„ ë Œë”ë§ í•©ë‹ˆë‹¤.
```

#### Provider
Providerë¥¼ ì‚¬ìš©í•˜ë©´ Contextì˜ valueë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```javascript
import ColorBox from './components/ColorBox';
import ColorContext from './contexts/color'

const App = () => {
  return (
    <ColorContext.Provider value={{color: 'red'}}>
      <div>
        <ColorBox />
      </div>
      </ColorContext.Provider>
  );
};

export default App;
```

### 15.3 ë™ì  Context ì‚¬ìš©í•˜ê¸°

#### Context íŒŒì¼ ìˆ˜ì •í•˜ê¸°
Contextì˜ valueì—ëŠ” ìƒíƒœ ê°’ë§Œ ìˆì–´ì•¼í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆê³ , í•¨ìˆ˜ë¥¼ ì „ë‹¬í•´ ì¤„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
```javascript
///color.js
import React, { createContext, useState } from 'react';

const ColorContext = createContext({
  state: { color: 'black', subcolor: 'red' },
  actions: {
    setColor: () => {},
    setSubcolor: () => {}
  }
});

const ColorProvider = ({ children }) => {
  const [color, setColor] = useState('black');
  const [subcolor, setSubcolor] = useState('red');

  const value = {
    state: { color, subcolor },
    actions: { setColor, setSubcolor }
  };
  return (
    <ColorContext.Provider value={value}>{children}</ColorContext.Provider>
  );
};

// const ColorConsumer = ColorContext.Consumerê³¼ ê°™ì€ ì˜ë¯¸
const { Consumer: ColorConsumer } = ColorContext;

// ColorProviderì™€ ColorConsumer ë‚´ë³´ë‚´ê¸°
export { ColorProvider, ColorConsumer };

export default ColorContext;
```
```javascript
///ColorBox.js
import { ColorConsumer } from "../contexts/color";

const ColorBox = () => {
  return (
    
    <ColorConsumer>
    { ({state})=>(
    <>
      <div
        style={{
          width: '64px',
          height: '64px',
          background: state.color
        }}
      />
      <div 
      style={{
        width: '32px',
        height: '32px',
        background: state.subcolor
      }}
      />
      </>
      )} 
      </ColorConsumer>
  );
};

export default ColorBox;
```

#### ìƒ‰ìƒ ì„ íƒ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°
```javascript
import React from "react";
import { ColorConsumer } from "../contexts/color";

const colors = ["red", "orange", "yellow", "green", "blue", "indigo", "violet"];

const SelectColors = () => {
  return (
    <div>
      <h2>ìƒ‰ìƒì„ ì„ íƒí•˜ì„¸ìš”.</h2>
      <ColorConsumer>
        {({ actions }) => (
          <div style={{ display: "flex" }}>
            {colors.map((color) => (
              <div
                key={color}
                style={{
                  background: color,
                  width: "24px",
                  height: "24px",
                  cursor: "pointer",
                }}
                onClick={() => actions.setColor(color)}
                onContextMenu={(e) => {
                  e.preventDefault();
                  /* ë§ˆìš°ìŠ¤ ì˜¤ë¥¸ìª½ ë²„íŠ¼ í´ë¦­ ì‹œ ë©”ë‰´ê°€ ëœ¨ëŠ” ê²ƒì„ ë¬´ì‹œí•¨ */
                  actions.setSubcolor(color);
                }}
              />
            ))}
          </div>
        )}
      </ColorConsumer>
      <hr />
    </div>
  );
};

export default SelectColors;
```

### 15.4 Consumer ëŒ€ì‹  Hook ë˜ëŠ” static contextType ì‚¬ìš©í•˜ê¸°

#### useContext Hook ì‚¬ìš©í•˜ê¸°
```javascript
///ColorBox.js
import ColorContext from "../contexts/color";
import { useContext } from 'react';

const ColorBox = () => {
    const { state } = useContext(ColorContext)
    return (
        <>
            <div
                style={{
                    width: '64px',
                    height: '64px',
                    background: state.color
                }}
            />
            <div
                style={{
                    width: '32px',
                    height: '32px',
                    background: state.subcolor
                }}
            />
        </>
    )
}

export default ColorBox;
```
#### static contextType ì‚¬ìš©í•˜ê¸°
```javascript
///SelectColors.js
import React, { Component } from 'react';
import ColorContext from '../contexts/color';

const colors = ['red', 'orange', 'yellow', 'green', 'blue', 'indigo', 'violet'];

class SelectColors extends Component {
  static contextType = ColorContext;

  handleSetColor = color => {
    this.context.actions.setColor(color);
  };

  handleSetSubcolor = subcolor => {
    this.context.actions.setSubcolor(subcolor);
  };

  render() {
    return (
      <div>
        <h2>ìƒ‰ìƒì„ ì„ íƒí•˜ì„¸ìš”.</h2>
        <div style={{ display: 'flex' }}>
          {colors.map(color => (
            <div
              key={color}
              style={{
                background: color,
                width: '24px',
                height: '24px',
                cursor: 'pointer'
              }}
              onClick={() => this.handleSetColor(color)}
              onContextMenu={e => {
                e.preventDefault();
                this.handleSetSubcolor(color);
              }}
            />
          ))}
        </div>
        <hr />
      </div>
    );
  }
}

export default SelectColors;
```
stactic contextTypeì„ ì‚¬ìš©í•˜ë©´ í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œ Contextë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
static contextTypeì„ ì •ì˜í•˜ë©´ í´ë˜ìŠ¤ ë©”ì„œë“œì—ì„œë„ Contextì— ë„£ì–´ ë‘” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤. ë‹¨ì ì´ë¼ë©´, í•œ í´ë˜ìŠ¤ì—ì„œ í•˜ë‚˜ì˜ Contextë°–ì— ì‚¬ìš©í•˜ì§€ ëª»í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.